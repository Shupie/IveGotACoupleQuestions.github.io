<!DOCTYPE html>
<html>
<head>
  <title>Square Game</title>
  <style>
    body {
      margin: 0;
      padding: 0;
    }
    canvas {
      display: block;
      margin: 0 auto;
    }
  </style>
</head>
<body>
  <canvas id="canvas" width="500" height="500"></canvas>
  <script>
    // Get the canvas element
    const canvas = document.querySelector("#canvas");

    // Get the canvas context
    const ctx = canvas.getContext("2d");

    // Create the square
    const square = {
      x: canvas.width / 2,
      y: canvas.height / 2,
      size: 20,
      vx: 5,
      vy: 5,
    };

    // Create a flag to indicate whether the square is flashing
    let isFlashing = false;

    // Draw the square
    function drawSquare() {
      ctx.fillStyle = "black";
      ctx.fillRect(square.x, square.y, square.size, square.size);
    }

    // Update the square's position
    function updateSquare() {
      square.x += square.vx;
      square.y += square.vy;

      // Check if the square hits the top or bottom of the canvas
      if (square.y < 0 || square.y > canvas.height - square.size) {
        square.vy *= -1;
      }

      // Check if the square hits the left or right side of the canvas
      if (square.x < 0 || square.x > canvas.width - square.size) {
        square.vx *= -1;
      }

      // Check if the square hits a corner exactly correct
      if (square.x === 0 && square.y === 0 || square.x === canvas.width - square.size && square.y === 0 || square.x === 0 && square.y === canvas.height - square.size || square.x === canvas.width - square.size && square.y === canvas.height - square.size) {
        // Start the screen flashing
        isFlashing = true;
      }
    }

    // Flash the screen
    function flashScreen() {
      // Set the canvas background color to a random color
      ctx.fillStyle = "rgb(" + Math.floor(Math.random() * 255) + "," + Math.floor(Math.random() * 255) + "," + Math.floor(Math.random() * 255) + ")";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Request the next animation frame
      requestAnimationFrame(flashScreen);
    }

    // Game loop
    function gameLoop() {
      // Clear the canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw the square
      drawSquare();

      // Update the square's position
      updateSquare();

      // If the square is flashing, flash the screen
      if (isFlashing) {
        flashScreen();
      }

      // Request the next animation frame
      requestAnimationFrame(gameLoop);
    }

    // Start the game loop
    gameLoop();

    // Reset the game when the user clicks
    document.addEventListener("click", function () {
      // Stop the screen flashing
      isFlashing = false;

      // Reset the square's position and velocity
      square.x = canvas.width / 2;
      square.y = canvas.height / 2;
      square.vx = 5;
      square.vy = 5;
    });
  </script>
</body>
</html>